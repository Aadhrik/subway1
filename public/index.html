<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Dashboard</title>
    <meta name="description" content="Smart Home Dashboard">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@200;300;400;500;600;700&family=VT323&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Gridstack CSS -->
    <link href="https://cdn.jsdelivr.net/npm/gridstack@10.0.0/dist/gridstack.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/gridstack@10.0.0/dist/gridstack-extra.min.css" rel="stylesheet">
    
    <!-- Dashboard Styles -->
    <link rel="stylesheet" href="dashboard.css">
    
    <!-- Widget Styles -->
    <link rel="stylesheet" href="widgets/subway/subway.css">
    <link rel="stylesheet" href="widgets/weather/weather.css">
    <link rel="stylesheet" href="widgets/timepiece/timepiece.css">
    <link rel="stylesheet" href="widgets/flip-clock/flip-clock.css">
</head>

<body>
    <div id="dashboard"></div>

    <!-- Gridstack JS -->
    <script src="https://cdn.jsdelivr.net/npm/gridstack@10.0.0/dist/gridstack-all.min.js"></script>
    
    <!-- Core Framework -->
    <script src="widgets/widget-base.js"></script>
    <script src="dashboard.js"></script>
    
    <!-- Widgets -->
    <script src="widgets/subway/subway-widget.js"></script>
    <script src="widgets/weather/weather-widget.js"></script>
    <script src="widgets/timepiece/timepiece-widget.js"></script>
    <script src="widgets/flip-clock/flip-clock-widget.js"></script>
    
    <!-- Initialize Dashboard -->
    <script>
        // Create dashboard
        const dashboard = new Dashboard({
            title: 'Home Dashboard',
            showHeader: true,
            columns: 12,
            cellHeight: 70,
            margin: 12
        });
        
        // Register available widgets (for the "Add Widget" picker)
        dashboard.registerWidget('weather', WeatherWidget, {
            displayName: 'Weather',
            icon: 'üå§',
            gridW: 4,
            gridH: 5,
            locationName: 'New York',
            latitude: 40.7128,
            longitude: -74.0060
        });
        
        dashboard.registerWidget('subway', SubwayWidget, {
            displayName: 'Subway',
            icon: 'üöá',
            gridW: 8,
            gridH: 5,
            safetyBufferMinutes: 2
        });

        dashboard.registerWidget('timepiece', TimepieceWidget, {
            displayName: 'Watch',
            icon: '‚åö',
            gridW: 4,
            gridH: 4
        });

        dashboard.registerWidget('flip-clock', FlipClockWidget, {
            displayName: 'Flip Clock',
            icon: 'üïê',
            gridW: 5,
            gridH: 3,
            showSeconds: true
        });
        
        // Initialize
        dashboard.init('#dashboard');
        
        // Add default widgets (positions will be loaded from localStorage if saved)
        dashboard.addWidget(new WeatherWidget({
            locationName: 'New York',
            latitude: 40.7128,
            longitude: -74.0060
        }), { w: 4, h: 5, x: 0, y: 0, minW: 3, minH: 4 });
        
        dashboard.addWidget(new SubwayWidget({
            safetyBufferMinutes: 2
        }), { w: 8, h: 5, x: 4, y: 0, minW: 4, minH: 4 });

        dashboard.addWidget(new TimepieceWidget({}), { w: 4, h: 4, x: 0, y: 5, minW: 3, minH: 3 });

        dashboard.addWidget(new FlipClockWidget({
            showSeconds: true
        }), { w: 5, h: 3, x: 4, y: 5, minW: 4, minH: 3 });
    </script>
</body>

</html>
